# =============================================================================
# Llama Swappo Docker Compose Configuration
# =============================================================================
# Copy this file to .env and modify the values according to your setup.
# =============================================================================
#
# REQUIRED CONFIGURATION
# These are the minimum settings you need to configure for the service to work.
#
# DOMAIN: The domain name for your llama-swappo service
# This will be used for HTTPS certificate generation and routing
DOMAIN=your-domain.com
#
# MODELS_PATH: Path to your local models directory
# This should contain your GGUF model files (Qwen, DeepSeek, LLaMA, etc.)
MODELS_PATH=/path/to/your/models/directory
#
# CONFIG_PATH: Path to your llama-swappo configuration file
# This should be a valid config.yaml file for llama-swappo
CONFIG_PATH=./config/config.yaml
#
# =============================================================================
# GPU CONFIGURATION (AMD ROCm)
# =============================================================================
#
# ROCR_VISIBLE_DEVICES: Specify which AMD GPUs to use (comma-separated)
# Use '0' for first GPU, '1' for second GPU, etc.
# Set to 'all' to use all available GPUs
ROCR_VISIBLE_DEVICES=0
#
# HIP_VISIBLE_DEVICES: HIP device visibility (usually same as ROCR)
HIP_VISIBLE_DEVICES=0
#
# =============================================================================
# BUILD CONFIGURATION
# =============================================================================
#
# LLAMA_SWAPPO_BACKEND: AMD GPU backend to build with
# Options: rocm-rocwmma (recommended), rocm-base, vulkan
# - rocm-rocwmma: ROCm 6.4.4 with hipBLASLt optimization (best performance)
# - rocm-base: ROCm 6.4.4 base libraries
# - vulkan: Vulkan-based rendering
LLAMA_SWAPPO_BACKEND=rocm-6.4.4-rocwmma
#
# LLAMA_SWAPPO_IMAGE: Docker image name for llama-swappo
# Change this if you're using a different image name or tag
LLAMA_SWAPPO_IMAGE=llama-swappo-halo-rocm-rocwmma:latest
#
# BUILD_LOCAL: Build image locally instead of using pre-built image
# Set to 'true' to build from source using docker/Dockerfile
# Set to 'false' to use pre-built image from registry
BUILD_LOCAL=false
#
# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
#
# CACHE_PATH: Path for llama-swappo cache (optional but recommended)
# This will be mounted as /models/llama-cache in the container
CACHE_PATH=./cache
#
# LLAMA_CACHE: Cache path inside container (usually /models/llama-cache)
LLAMA_CACHE=/models/llama-cache
#
# =============================================================================
# TRAEFIK CONFIGURATION
# =============================================================================
#
# TRAEFIK_DASHBOARD_HOST: Domain for Traefik dashboard (optional)
# Comment out or leave empty if you don't want to expose the dashboard
TRAEFIK_DASHBOARD_HOST=traefik.your-domain.com
#
# TRAEFIK_AUTH_USER: Basic auth for Traefik dashboard (username:password hash)
# Generate with: htpasswd -nb username password
# Default: admin:admin (change for production!)
TRAEFIK_AUTH_USER=admin:$$apr1$$$$6$$oZ5hK6JzTp1Rm9x5sX2zG.
#
# ACME_EMAIL: Email for Let's Encrypt certificates
# Only used if you switch from self-signed to Let's Encrypt
ACME_EMAIL=admin@your-domain.com
#
# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
#
# SECURITY_HEADERS: Enable security headers middleware (recommended)
# Set to 'false' to disable security headers
SECURITY_HEADERS=true
#
# METRICS_ACCESS: Control access to /metrics endpoint
# Set to 'false' to disable metrics exposure
METRICS_ACCESS=true
#
# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
#
# LOG_LEVEL: Logging level for services
# Options: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO
#
# RESTART_POLICY: Container restart policy
# Options: no, on-failure, always, unless-stopped
RESTART_POLICY=unless-stopped
#
# =============================================================================
# PRODUCTION OVERRIDES (uncomment as needed)
# =============================================================================
#
# For production environments, you might want to override these:
#
# # Use Let's Encrypt instead of self-signed certificates
# # TRAEFIK_CERT_RESOLVER=letsencrypt
#
# # Disable Traefik dashboard in production
# # TRAEFIK_DASHBOARD_HOST=
#
# # Enable rate limiting
# # RATE_LIMIT_ENABLE=true
# # RATE_LIMIT_AVERAGE=100
# # RATE_LIMIT_BURST=200
#
# # Custom memory limits (adjust based on your system)
# # MEMORY_LIMIT=128G
# # MEMORY_RESERVATION=64G
# # CPU_RESERVATION=8
#
# =============================================================================
# EXAMPLE VALUES
# =============================================================================
#
# Example for a typical setup:
# DOMAIN=llama.example.com
# MODELS_PATH=/home/user/models/llm
# CONFIG_PATH=/home/user/llama-swappo/config/config.yaml
# ROCR_VISIBLE_DEVICES=0
# HIP_VISIBLE_DEVICES=0
# CACHE_PATH=/home/user/llama-swappo/cache
# TRAEFIK_DASHBOARD_HOST=traefik.example.com
#
# =============================================================================
# HOST CONFIGURATION REQUIREMENTS
# =============================================================================
#
# Make sure your host system has:
# 1. AMD GPU drivers and ROCm installed
# 2. Docker with GPU support (nvidia-docker2 or equivalent)
# 3. Sufficient memory (32GB+ recommended for large models)
# 4. Ports 80 and 443 available for Traefik
# 5. Proper DNS records pointing to your host (for production domains)
#
# =============================================================================
# QUICK START
# =============================================================================
#
# 1. Copy this file: cp .env.example .env
# 2. Edit .env with your configuration
# 3. Create your config directory: mkdir -p config
# 4. Create cache directory: mkdir -p cache
# 5. Start services: docker-compose up -d
# 6. Check status: docker-compose ps
# 7. View logs: docker-compose logs -f
#
# =============================================================================
# TROUBLESHOOTING
# =============================================================================
#
# GPU Issues:
# - Check if AMD GPU is accessible: rocminfo
# - Verify Docker GPU support: docker run --rm --gpus all rocm/pytorch
# - Check ROCm installation: rocminfo, clinfo
#
# Certificate Issues:
# - Self-signed certs will show browser warnings (normal for development)
# - For production, use real domains and Let's Encrypt
# - Clear browser cache if certificates don't update
#
# Network Issues:
# - Ensure ports 80/443 are available
# - Check firewall settings
# - Verify DNS records for custom domains
#
# =============================================================================
# SUPPORT
# =============================================================================
#
# For issues with:
# - llama-swappo: Check the official documentation
# - Traefik: https://traefik.io/documentation/
# - AMD GPU: https://rocm.docs.amd.com/
# - Docker Compose: https://docs.docker.com/compose/
# =============================================================================